/**
* Last modified: 2020/12/21 18:40:29
* Part of the WordPress plugin Tag Groups
* Plugin URI: https://chattymango.com/tag-groups/
* Author: Christoph Amthor
* License: GNU GENERAL PUBLIC LICENSE, Version 3
* Created with: https://jscompress.com/
*/
function tg_do_ajax(a,b,c){var d=jQuery("#tg_nonce").val();jQuery.extend(b,{action:"tg_ajax_manage_groups",nonce:d}),b.start_position=jQuery("#tg_start_position").val();var f="";jQuery.ajax({url:a.ajaxurl,data:b,dataType:"text",method:"post",success:function(d){try{var e=JSON.parse(d)}catch(a){f="<div class=\"notice notice-error\"><p>Error loading groups. Please check <b>Tag Groups Settings -> Troubleshooting -> System Information -> Ajax Test</b></p></div><br clear=\"all\" />",jQuery("#tg_message_container").fadeTo(200,0,function(){jQuery(this).html(f).fadeTo(400,1)}),console.log("[Tag Groups] Error parsing data from server",a.message,", data:\""+d.toString()+"\"")}var g=e.data,h=e.supplemental.message,j=e.supplemental.nonce;if(""!==j&&jQuery("#tg_nonce").val(j),"success"===g){var k=e.supplemental.groups,l=e.supplemental.start_position;""===l?l=b.start_position:jQuery("#tg_start_position").val(l);var m=e.supplemental.max_number,n="",o=l;if(0<m)for(var p in k){var q=k[p];null!=q.id&&(n+="<tr class=\"tg_sort_tr\" data-position=\""+o+"\">\n",n+="<td>"+q.id+"</td>\n",n+="<td class=\"tg_label_column\"><span class=\"tg_edit_label tg_text\" data-position=\""+o+"\" data-label=\""+escape_html(q.label)+"\">"+escape_html(q.label)+"<span class=\"dashicons dashicons-edit tg_pointer\" style=\"display:none;\"></span></span></td>\n",n+="<td class=\"tg_hide_when_drag\"><div class=\"tg_term_amounts\">",n+=""===a.tagsurl?q.amount+"</span>":"<a href=\""+a.tagsurl+"&term-filter="+q.id+"\" title=\""+c.tooltip_showtags+"\">"+q.amount+"</a>",n+="</div>",n+="</td>\n<td class=\"tg_hide_when_drag\">",""!==a.tagsurl&&(n+="<a href=\""+a.tagsurl+"&term-filter="+q.id+"\" title=\""+c.tooltip_showtags+"\"><span class=\"tg_pointer dashicons dashicons-tag\"></span></a> "),""!==a.postsurl&&(n+="<a href=\""+a.postsurl+"&post_status=all&tg_filter_posts_value="+q.id+"\" title=\""+c.tooltip_showposts+"\"><span class=\"tg_pointer dashicons dashicons-admin-page\"></span></a>"),n+="</td>\n<td class=\"tg_hide_when_drag\">",n+="<span class=\"tg_delete tg_pointer dashicons dashicons-trash\" data-position=\""+o+"\" title=\""+c.tooltip_delete+"\"></span>",n+="<span class=\"tg_pointer dashicons dashicons-plus-alt\" title=\""+c.tooltip_newbelow+"\" onclick=\"tg_toggle_clear("+o+")\" style=\"margin-left:5px;\"></span>",n+="</td>\n",n+="<td class=\"tg_hide_when_drag\">",n+="<div style=\"overflow:hidden; position:relative; height:20px; clear:both;\">",1<o&&(n+="<span class=\"tg_up tg_pointer dashicons dashicons-arrow-up\" data-position=\""+o+"\" title=\""+c.tooltip_move_up+"\"\"></span>"),n+="</div>",n+="<div style=\"overflow:hidden; position:relative; height:20px; clear:both;\">",o<m&&(n+="<span class=\"tg_down tg_pointer dashicons dashicons-arrow-down\" data-position=\""+o+"\" title=\""+c.tooltip_move_down+"\"></span>"),n+="</div>",n+="</td>\n",n+="</tr>\n",n+="<tr class=\"tg_new_group_row\" style=\"display:none;\" id=\"tg_new_"+o+"\">\n",n+="<td style=\"display:none;\">"+c.newgroup+"</td>\n",n+="<td colspan=\"5\" style=\"display:none;\"><input data-position=\""+o+"\"  placeholder=\""+c.placeholder_new+"\">",n+="<span class=\"tg_new_yes dashicons dashicons-yes tg_pointer\" data-position=\""+o+"\"></span> <span class=\"tg_new_no dashicons dashicons-no-alt tg_pointer\" data-position=\""+o+"\" onclick=\"tg_toggle_clear("+o+")\"></span>",n+="</td>\n",n+="</tr>\n",o++)}else n+="<tr id=\"tg_new_1\">\n",n+="<td ></td>\n",n+="<td colspan=\"4\"><input data-position=\"0\" placeholder=\""+c.newgroup+"\">",n+="<span class=\"tg_new_yes dashicons dashicons-yes tg_pointer\" data-id=\"1\"></span></span>",n+="</td>\n",n+="</tr>\n";jQuery("#tg_groups_container").html(n);var r,s,t="",u=+a.items_per_page;for(1>u&&(u=1),s=Math.floor(l/u)+1,max_page=Math.floor((m-1)/u)+1,t+=1<s?"<button class=\"button-secondary tg_pager_button\" data-page=\""+(s-1)+"\"><span class=\"dashicons dashicons-arrow-left-alt2\"></span></button>":"<button class=\"button-secondary tg_pager_button\" disabled><span class=\"dashicons dashicons-arrow-left-alt2\"></span></button>",i=1;i<=m;i+=u)r=Math.floor(i/u)+1,t+=r==s?"<button class=\"tg_reload_button tg_pointer button-secondary\" id=\"tg_groups_reload\" title=\""+c.tooltip_reload+"\"><span class=\"dashicons dashicons-update\"></span></button>":"<button class=\"button-secondary tg_pager_button\" data-page=\""+r+"\"><span>"+r+"</span></button>";t+=s<max_page?"<button class=\"button-secondary tg_pager_button\" data-page=\""+(s+1)+"\"><span class=\"dashicons dashicons-arrow-right-alt2\"></span></button>":"<button class=\"button-secondary tg_pager_button\" disabled><span class=\"dashicons dashicons-arrow-right-alt2\"></span></button>",jQuery("#tg_pager_container").fadeOut(200,function(){jQuery(this).html(t).fadeIn(400,function(){jQuery("#tg_pager_container_adjuster").css({height:+jQuery("#tg_pager_container").height()+10})})}),f+=""==h?"<div><p>&nbsp;</p></div><br clear=\"all\" />":"<div class=\"notice notice-success\"><p>"+h+"</p></div><br clear=\"all\" />",jQuery("#tg_message_container").fadeTo(200,0,function(){jQuery(this).html(f).fadeTo(400,1)})}else""==h&&(h="Error loading data.",console.log(d)),f+="<div class=\"notice notice-error\"><p>"+h+"</p></div><br clear=\"all\" />",jQuery("#tg_message_container").fadeTo(200,0,function(){jQuery(this).html(f).fadeTo(400,1)})},error:function(a){console.log("[Tag Groups] error: "+a.responseText)}})}function tg_close_textfield(a,b){var c,d=a.children(":first").attr("data-position");c=b?escape_html(a.children(":first").attr("value")):escape_html(a.children(":first").attr("data-label")),a.replaceWith("<span class=\"tg_edit_label tg_text\" data-position=\""+d+"\" data-label=\""+c+"\">"+c+" <span class=\"dashicons dashicons-edit tg_pointer\" style=\"display:none;\"></span></span>")}function tg_toggle_clear(a){var b=jQuery("#tg_new_"+a);b.is(":visible")?(jQuery("[data-position="+a+"]").val(""),b.children().fadeOut(300,function(){b.slideUp(600)})):(jQuery("[id^=\"tg_new_\"]:visible").children().fadeOut(300,function(){jQuery("[id^=\"tg_new_\"]:visible").slideUp(400)}),b.delay(200).slideDown(400,function(){b.children().fadeIn(300),jQuery("[data-position="+a+"]").trigger("focus")}))}function tg_close_all_textfields(){jQuery(".tg_edit_label_active").each(function(){tg_close_textfield(jQuery(this),!1)})}function escape_html(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}